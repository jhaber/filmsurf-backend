var Search = require('./search').search;
var Retrieve = require('./movie').retrieve;

exports.bind = function(router) {
    router.get('/search').bind(function (request, response, params) {
        Search(params, function (data) {
            response.send(200, {'Content-Type': 'application/json'}, data);
        });
    });

    router.get(/^movie\/(\w+)$/).bind(function (request, response, id, params) {
        params.id = id;
        Retrieve(params, function(data) {
            if (data) {
                response.send(200, {'Content-Type': 'application/json'}, data);
            } else {
                response.send(404);
            }
        });
    });
}