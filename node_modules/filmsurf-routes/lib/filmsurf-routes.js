var mongoose = require('mongoose');

console.log('Opening mongo connection to ' + process.env.MONGOLAB_URI);

mongoose.connect(process.env.MONGOLAB_URI);

mongoose.connection.addListener('open', function() {
    console.log('Mongo connection opened');
});

exports.bind = function(router) {
    router.path('/search', require('./search').bind);

    router.get('/').bind(function (request, response, params) {
        response.send(200, {'Content-Type': 'application/json'}, { reply: 'hello' });
    });
}