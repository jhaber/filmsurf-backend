var Search = require('./search').search;
var Retrieve = require('./movie').retrieve;

exports.bind = function(router) {
    router.get('/search').bind(function (request, response, params) {
        var query = params.q;
        var page = (params.page || 0) + 1;
        var items = params.items || 10;

        Search(query, page, items, params, function (data) {
            response.send(200, {'Content-Type': 'application/json'}, data);
        });
    });

    router.get(/^movie\/(\w+)$/).bind(function (request, response, id, params) {
        Retrieve(id, params, function(data) {
            response.send(200, {'Content-Type': 'application/json'}, data);
        });
    });
}